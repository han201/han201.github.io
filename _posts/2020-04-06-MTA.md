---
layout: post
title: EDA (Exploratory Data Analysis) Example
---

* NYC MTA Data
-----

This is the first project in [Metis Data Science Bootcamp](www.thisismetis.com), demonstrating a simple Exploratory Data Analysis (EDA) using [MTA turnstile data](http://web.mta.info/developers/turnstile.html). MTA publically offers the entry and the exit counts of every turnstile for the past 10+ years with 4 hour frequency. This project is aimed to practice numpy and pandas as well as some Python visual tools such as Matplotlib and Seaborn.

## Data

MTA Turnstile Usage Data have the following information:

* C/A: Control Area name/Booth name. 
* Unit: Remote unit ID of station
* SCP: a specific address for a given device
* STATION: name assinged to the subway station. Could be same for multiple stations
* LINENAME: Train lines
* DIVISION: The original line name that the station belonged to
* DATE: the date of data


## Procedures

* Import Data
* Data Preprocessing
* Exploratory Data Analysis
* Conclusion


### Import Data

The easiest way is to use pandas' read_csv functionality such as :

df = pd.read_csv('http://web.mta.info/developers/data/nyct/turnstile/turnstile_190406.txt')

Meanwhile, a clever way would be to use a funciton to read multiple data at once:

def get_data(week_nums):
    url = "http://web.mta.info/developers/data/nyct/turnstile/turnstile_{}.txt"
    dfs = []
    for week_num in week_nums:
        file_url = url.format(week_num)
        dfs.append(pd.read_csv(file_url))
    return pd.concat(dfs)
        
week_nums = [190525, 190518, 190511, 190504, 190427, 190420, 190413, 190406]
turnstiles_df = get_data(week_nums)



### Data Preprocessing

* Make sure to remove any empty spaces in the column name
* Use 'datetime' to read the date format correctly (also useful for 'Day of Week' conversion)
* Identify a turnstile by combining C/A, UNIT, SCP and Station columns
* Convert into number of entries and exits by the day or by every 4 hours
* Identify bad data and either throw away or replace with reasonable numbers
* Consolidate by each station (use 'LINENAME' info to identify a unique station name)

### Exploratory Data Analysis

* An example graph for the number of daily entries for a turnstile: 34th Herald Square Station
 :There is a segregation in usage between weekdays and weekends

![34Herald]({{ site.url }}/images/P1_turnstile_example.JPEG)


* Combine the turnstile information into a Station level information

* Find out top 10 most populated stations

![Top 10 STATIONS]({{ site.url }}/images/P1_top_10_Stations.jpg)


* Examine the variance by the week of the day 

![MTA Daily Entries by the week of the day]({{ site.url }}/images/P1_DOW.jpeg)


### Conclusion

The result is very predictable with the common sense: 42 Times Squres, 42 Grand Central, 34 Herald Squres, 34 Penn Stations, Fulto Stations, etc were among the most populated stations.

### Future Work

I used the daily entry numbers for the analysis, however, it could be also interesting to do the analysis by the 4 hour frequency. I expect that the 4 pm - 8 pm window would have the most usage.


